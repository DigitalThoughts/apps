<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="Compute MD5 checksum of files from your Google Drive™ file/folders. Download as md5 checksums text file. It's fast & free to use tool.">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
	<meta name="google-site-verification" content="GAtQ74U4IT4QuVydgibaAP2P5UUAbyUQcLEseSJXQR8" />
	<title>Drive Checksum for Google Drive</title>

	<!-- Add to homescreen for Chrome on Android -->
	<meta name="mobile-web-app-capable" content="yes">
	<link rel="icon" sizes="192x192" href="images/android-desktop.png">

	<!-- Add to homescreen for Safari on iOS -->
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-title" content="Drive Checksum">
	<link rel="apple-touch-icon-precomposed" href="images/ios-desktop.png">

	<!-- Tile icon for Win8 (144x144 + tile color) -->
	<meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
	<meta name="msapplication-TileColor" content="#3372DF">

	<link rel="shortcut icon" href="images/favicon.png">

	<!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
	<!--
    <link rel="canonical" href="http://www.example.com/">
    -->

	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
	<link rel="stylesheet" href="styles/styles.css">
	<style>
		#downloadmd5sum {
			position: fixed;
			display: block;
			right: 0;
			bottom: 0;
			margin-right: 40px;
			margin-bottom: 40px;
			z-index: 900;
		}
	</style>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script data-ad-client="ca-pub-8437075302836740" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

</head>

<body class="mdl-demo mdl-color--grey-100 mdl-color-text--grey-700 mdl-base">
	<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
		<header class="mdl-layout__header mdl-layout__header--scroll mdl-color--primary">
			<div class="mdl-layout--large-screen-only mdl-layout__header-row">
			</div>
			<div class="mdl-layout--large-screen-only mdl-layout__header-row">
				<h3>Drive Checksum</h3>
			</div>
			<div class="mdl-layout--large-screen-only mdl-layout__header-row">
			</div>
			<div class="mdl-layout__tab-bar mdl-js-ripple-effect mdl-color--primary-dark">
				<a href="#overview" class="mdl-layout__tab is-active">Overview</a>
				<a href="#features" class="mdl-layout__tab">About</a>
				<button id="add" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-shadow--4dp mdl-color--accent">				
					<i class="material-icons" role="presentation">add</i>
					<span class="visuallyhidden">Add</span>
				</button>
			</div>
		</header>
		<main class="mdl-layout__content">
			<div class="mdl-layout__tab-panel is-active" id="overview">
				<section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
					<!-- Ads top -->
				</section>
				<section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
					<div class="mdl-card mdl-cell mdl-cell--12-col">
						<div class="mdl-card__supporting-text mdl-grid mdl-grid--no-spacing">
							<h4 class="mdl-cell mdl-cell--12-col">MD5 hashes</h4>
							<h4 class="mdl-cell mdl-cell--12-col"><button id="authorize_button" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored">Authorize</button>&emsp;<button id="signout_button" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored">Sign Out</button></h4>
							<div id="progress" style="width:100%;" class="mdl-progress mdl-js-progress mdl-progress__indeterminate"></div>
							<h4 class="mdl-cell mdl-cell--12-col">Sign out</h4>

<pre id="output"></pre>


						</div>
						<div class="mdl-card__actions">
							<a href="https://gsuite.google.com/marketplace/app/drive_checksum/197544146915" class="mdl-button">Find checksum of all files in your Drive using Spreadsheet add-on</a>
						</div>
					</div>
					<button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="btn2">
						<i class="material-icons">more_vert</i>
					</button>
					<ul class="mdl-menu mdl-js-menu mdl-menu--bottom-right" for="btn2">
						<li class="mdl-menu__item">&emsp;<button id="signout_button_aside" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored">Sign Out</button>&emsp;</li>
					</ul>
				</section>

				<section class="section--footer mdl-color--white mdl-grid">
					<div>
						<!-- Ads bottom -->
					</div>
				</section>

			</div>
			<div class="mdl-layout__tab-panel" id="features">
				<section class="section--center mdl-grid mdl-grid--no-spacing">
					<div class="mdl-cell mdl-cell--12-col">
						<h4>Welcome to Drive Checksum for Google Drive</h4>
						<p>Drive Checksum is a free app that allows you to find the md5 checksum of files on the Google Drive. An MD5 checksum is a 32-character hexadecimal number that is computed on a file. If two files have the same MD5 checksum value, then there is a high probability that the two files are the same.</p>
						<h4>How to use Drive Cheksum</h4>
						<p><b>To get started, open the file using Drive Chesksum app from the Google Drive context menu.</b></p>

						<div id="startPage" class="startPage">
							<div id="" class="" style="">
								<span style="color: rgb(95, 99, 104); font-size: 24px;">For Folders</span>
							</div>
							<ol>
								<li style="margin: 0.25rem 0px 0.25rem 1.25rem;">On your computer, go to&nbsp;<a href="https://drive.google.com/" target="_blank" rel="noopener" style="color: rgb(103, 58, 183);">drive.google.com</a></li>
								<li style="margin: 0.25rem 0px 0.25rem 1.25rem;">Right Click on the folder you want to find the checksum</li>
								<li style="margin: 0.25rem 0px 0.25rem 1.25rem;">Click Open with option in the context menu</li>
								<li style="margin: 0.25rem 0px 0.25rem 1.25rem;">Click on the Drive Checksum app</li>
								<li style="margin: 0.25rem 0px 0.25rem 1.25rem;">Authorize the app for the first time or when prompted</li>
								<li style="margin: 0.25rem 0px 0.25rem 1.25rem;">The checksums of files in the selected folder will be displayed</li>
								<li style="margin: 0.25rem 0px 0.25rem 1.25rem;">If you have sub folders in the selected folder, click on the subfolder (pink blue) in the list and repeat the process from Step 1.</li>
								<li style="margin: 0.25rem 0px 0.25rem 1.25rem;">Download the checksums by clicking the floating button on the right bottom<br></li>
							</ol>
							<div>

								<span style="color: rgb(95, 99, 104); font-size: 24px;">For Files</span>
							</div>
							<div>
								<ol>
									<li style="margin: 0.25rem 0px 0.25rem 1.25rem; line-height: 25.2px;">On your computer, go to&nbsp;<a href="https://drive.google.com/" target="_blank" rel="noopener" style="color: rgb(103, 58, 183);">drive.google.com</a></li>
									<li style="margin: 0.25rem 0px 0.25rem 1.25rem; line-height: 25.2px;">Right Click on the single file or multiple files for which you want to find the checksum</li>
									<li style="margin: 0.25rem 0px 0.25rem 1.25rem; line-height: 25.2px;">Click Open with option in the context menu</li>
									<li style="margin: 0.25rem 0px 0.25rem 1.25rem; line-height: 25.2px;">Click on the Drive Checksum app</li>
									<li style="margin: 0.25rem 0px 0.25rem 1.25rem; line-height: 25.2px;">Authorize the app for the first time or when prompted</li>
									<li style="margin: 0.25rem 0px 0.25rem 1.25rem; line-height: 25.2px;">The checksums of the selected file will be displayed</li>
									<li style="margin: 0.25rem 0px 0.25rem 1.25rem; line-height: 25.2px;">Download the checksums by clicking the floating button on the right bottom</li>
								</ol>
							</div>
							<h4>How Drive Checksum Works?</h4>
							<ul>
								<li>Drive Checksum is a pure Javascript web app. All processing is done locally in your web browser and on your computer</li>
								<li>Text &amp; Photo Editor will not work "offline" without an internet connection. The app needs the drive file to generate the checksum</li>
								<li>You have the option to save the file to Google Drive. No data is sent to Google Drive without your permission</li>
								<li>If you do wish to open a text file from Google Drive, you will be asked to authorize Dive Checksum for permission to access Google Drive.</li>
							</ul>
						</div>
					</div>
				</section>
			</div>
			<footer class="mdl-mega-footer">
				<div class="mdl-mega-footer--middle-section">
					<div class="mdl-mega-footer--drop-down-section">
						<input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked>
						<h1 class="mdl-mega-footer--heading">Need an app to be customized?</h1>
						<div>Need an add-on? script or webapp using Google technologies apps script. <a target="_blank" href="https://www.digitalthoughts.science/contact">Contact me</a>!<p>I develop add-ons, scripts using Apps Script technologies that make your business processes faster and easier.</p></div>
					</div>
				</div>
				<div class="mdl-mega-footer--bottom-section">
					<div class="mdl-logo">
						Copyright © 2020 <a href="https://www.digitalthoughts.science/">Digital Thoughts</a>
					</div>
					<ul class="mdl-mega-footer--link-list">
						<li><a target="_blank" href="https://www.digitalthoughts.science/legal/privacy-policy">Privacy policy</a></li>
						<li><a target="_blank" href="https://www.digitalthoughts.science/legal/terms-of-service">Terms of use</a></li>
						<li><a target="_blank" href="https://www.digitalthoughts.science/contact">Contact</a></li>
					</ul>
				</div>
			</footer>
		</main>
	</div>
	<script type="text/javascript">
		(function(i, s, o, g, r, a, m) {
			i['GoogleAnalyticsObject'] = r;
			i[r] = i[r] || function() {
				(i[r].q = i[r].q || []).push(arguments)
			}, i[r].l = 1 * new Date();
			a = s.createElement(o),
				m = s.getElementsByTagName(o)[0];
			a.async = 1;
			a.src = g;
			m.parentNode.insertBefore(a, m)
		})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
		ga('create', 'UA-74329110-13', 'auto');
		ga('send', 'pageview');
		// Client ID and API key from the Developer Console
		var CLIENT_ID = '982370769845-4vdv6su1lgt6npf4l8qm14vat76odoo9.apps.googleusercontent.com';
		var API_KEY = 'AIzaSyCktYeTRiqnUcBc9G5tBP0zTCQ0U3XeHWs';
		// Array of API discovery doc URLs for APIs used by the quickstart
		var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];
		// Authorization scopes required by the API; multiple scopes can be
		// included, separated by spaces.
		var SCOPES = 'https://www.googleapis.com/auth/drive.metadata.readonly';
		var PARAMS = {};
		var MD5SUMS = '';
		var dc = {};
		"use strict";
		// Auth stuff gets top priority as it can take a while....
		var window_location_to_params_object = function() {
			var match;
			var pl = /\+/g; // Regex for replacing addition symbol with a space
			var search = /([^&=]+)=?([^&]*)/g;
			var decode = function(s) {
				return decodeURIComponent(s.replace(pl, " "));
			};
			var query = window.location.search.substring(1);
			var url_params = {};
			while ((match = search.exec(query)) !== null)
				url_params[decode(match[1])] = decode(match[2]);
			PARAMS = url_params;
			return url_params;
		}
		dc.url_file_id = (function() {
			try {
				var params = window_location_to_params_object();
				return JSON.parse(params['state'])['ids'];
			} catch (e) {
				return undefined
			}
		})();

		function appendPre(message) {
			$("#output").append('<div class="section__text mdl-cell mdl-cell--10-col-desktop mdl-cell--6-col-tablet mdl-cell--3-col-phone">'+message+'</div>');
		}

		function findType(callback) {
			if (!dc.url_file_id) {
				alert('Open files using the Open with contextual menu from your Google Drive.');
				stops();
			}
			var X = function(request) {
				request.execute(function(resp) {
					var mime = resp.mimeType;
					if (mime == "application/vnd.google-apps.folder")
						listFolders();
					else
						listFiles();
				});
			}
			var initialRequest = gapi.client.drive.files.get({
				'fileId': dc.url_file_id
			});
			X(initialRequest);
		}
		var authorizeButton = document.getElementById('authorize_button');
		var signoutButton = document.getElementById('signout_button');
		/**
		 *  On load, called to load the auth2 library and API client library.
		 */
		function handleClientLoad() {
			gapi.load('client:auth2', initClient);
		}
		/**
		 *  Initializes the API client library and sets up sign-in state
		 *  listeners.
		 */
		function initClient() {
			gapi.client.init({
				apiKey: API_KEY,
				clientId: CLIENT_ID,
				discoveryDocs: DISCOVERY_DOCS,
				scope: SCOPES
			}).then(function() {
				// Listen for sign-in state changes.
				gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
				// Handle the initial sign-in state.
				updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
				authorizeButton.onclick = handleAuthClick;
				signoutButton.onclick = handleSignoutClick;
			}, function(error) {
				appendPre(JSON.stringify(error, null, 2));
			});
		}
		/**
		 *  Called when the signed in status changes, to update the UI
		 *  appropriately. After a sign-in, the API is called.
		 */
		function updateSigninStatus(isSignedIn) {
			if (isSignedIn) {
				authorizeButton.style.display = 'none';
				signoutButton.style.display = 'block';
				gapi.client.drive.about.get({
					'fields': "user"
				}).then(function(resp) {
					var obj = resp.result.user;
					$("#profileImageImg").attr("src", obj.photoLink);
					$("#profileName").attr("title", obj.displayName + " (" + obj.emailAddress + ")");
					$("#profileName").html(obj.displayName);
				});
				findType()
			} else {
				authorizeButton.style.display = 'block';
				signoutButton.style.display = 'none';
				stops();
			}
		}
		/**
		 *  Sign in the user upon button click.
		 */
		function handleAuthClick(event) {
			gapi.auth2.getAuthInstance().signIn();
		}
		/**
		 *  Sign out the user upon button click.
		 */
		function handleSignoutClick(event) {
			gapi.auth2.getAuthInstance().signOut();
		}
		/**
		 * Append a pre element to the body containing the given message
		 * as its text node. Used to display the results of the API call.
		 *
		 * @param {string} message Text to be placed in pre element.
		 */
		/**
		 * Print files.
		 */
		function listFiles() {
			for (var i = 0; i < dc.url_file_id.length; i++) {
				gapi.client.drive.files.get({
					'fileId': dc.url_file_id[i],
					'fields': "name, id, mimeType, md5Checksum"
				}).then(function(resp) {
					var filename = resp.result.name;
					var md5Checksum = resp.result.md5Checksum;
					var mime = resp.result.mimeType;
					if (md5Checksum) {
						appendPre(md5Checksum + ' ' + filename);
					} else {
						if (mime == "application/vnd.google-apps.folder") {
							md5Checksum = '--------------------------------';
							var mParams = JSON.parse(PARAMS['state']);
							mParams['ids'] = resp.id;
							appendPre(md5Checksum + ' <a href=\'?state=' + JSON.stringify(mParams) + '\'>' + filename + '</a>');
						}
					}
					MD5SUMS += md5Checksum + ' ' + filename + '\r\n';
				});
			}
			stops();
		}

		function listFolders(callback) {
			var retrievePageOfFiles = function(request) {
				request.then(function(resp) {
					var obj = resp.result.files
					for (i = 0; i < obj.length; i++) {
						var filename = obj[i].name;
						var md5Checksum = obj[i].md5Checksum;
						if (md5Checksum)
							appendPre(md5Checksum + ' ' + filename);
						else {
							md5Checksum = '--------------------------------';
							var mParams = JSON.parse(PARAMS['state']);
							mParams['ids'] = obj[i].id;
							if (obj[i].mimeType == "application/vnd.google-apps.folder")
								appendPre(md5Checksum + ' <a href=\'?state=' + JSON.stringify(mParams) + '\'>' + filename + '</a>');
							else
								appendPre(md5Checksum + ' ' + filename);
						}
						MD5SUMS += md5Checksum + ' ' + filename + '\r\n';
					}
					var nextPageToken = resp.nextPageToken;
					if (nextPageToken) {
						request = gapi.client.drive.files.list({
							'q': '\'' + dc.url_file_id + '\'' + ' in parents',
							'fields': "files",
							'pageToken': nextPageToken
						});
						retrievePageOfFiles(request);
					}
				});
			}
			var initialRequest = gapi.client.drive.files.list({
				'q': '\'' + dc.url_file_id + '\'' + ' in parents',
				'fields': "files"
			});
			retrievePageOfFiles(initialRequest);
			stops();
		}

		function getPlainText() {
			var text = "";
			if (typeof window.getSelection != "undefined") {
				text = $('#output').text();
				var download = document.getElementById('downloadmd5sum');
				download.href = 'data:text/plain;charset:utf-8,' + encodeURIComponent(MD5SUMS);
			}
			return text;
		}

		function swapAccounts() {
			handleSignoutClick();
			handleSignoutClick();
			$('#output').html('');
		}

		function stops() {
			$("#progress").remove();
		}
	</script>
	<script async defer src="https://apis.google.com/js/api.js" onload="this.onload=function(){};handleClientLoad()" onreadystatechange="if (this.readyState === 'complete') this.onload()"></script>
	<a download="md5sum.txt" onclick="getPlainText();" target="_blank" id="downloadmd5sum" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-color--accent mdl-color-text--accent-contrast"><i id="download" class="material-icons">file_download</i></a>
	<script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
</body>

</html>
